<link rel="import" href="../../elements.html">
<dom-module id="lapix-table">
    <style>
        :host {
            display: block;
            padding: 8px;
            --paper-toggle-button-checked-bar-color: var(--lapix-accent, --accent-color);
            --paper-toggle-button-checked-button-color:	var(--lapix-accent, --accent-color);
            --paper-toggle-button-checked-ink-color: var(--lapix-accent, --accent-color);
        }
        paper-fab.add{
            position: fixed;
            bottom: 60px;
            right: 60px;
            --paper-fab-background: var(--lapix-accent-dark, --accent-color);
        }

        paper-toggle-button{

        }

        paper-datatable{
            --paper-datatable-divider-color: var(--divider-color);
            --paper-datatable-row-selection-color: var(---lapix-accent-back);
            --paper-datatable-row-hover-color: var(--lapix-accent-back);
            --paper-datatable-checkbox-border-color:var(--lapix-accent, --accent-color);
            --paper-datatable-header-checkbox-border-color:	var(--lapix-accent, --accent-color);
            --paper-datatable-icon-color: var(--lapix-text, --primary-text-color);
        }

        paper-datatable-card{
            --paper-datatable-divider-color: var(--divider-color);
            --paper-datatable-selection-toolbar-color: var(--lapix-header, --primary-color);
            --paper-datatable-selection-toolbar-text-color:  var(--lapix-text, --primary-text-color);
            --paper-datatable-navigation-bar-text-color: var(--lapix-text);
            --paper-datatable-top-toolbar-text-color: var(--lapix-text, --primary-text-color);
            --paper-datatable-top-toolbar-icon-color: var(--lapix-text, --primary-text-color);
            --paper-datatable-selection-toolbar-icon-color: var(--lapix-text, --primary-text-color);
        }
    </style>
    <template>
        <iron-ajax id="get" handle-as="json" method="get" url="[[fullUrl]]"></iron-ajax>
        <iron-ajax id="set" handle-as="json" method="post" content-type="application/x-www-form-urlencoded"></iron-ajax>
        <iron-ajax id="del" handle-as="json" method="get"></iron-ajax>
        <paper-datatable-card id="datatableCard" header="[[label]]" page-size="10" data-source="{{_dataSource}}" id-property="id" selected-ids="{{selectedIds}}">
            <div toolbar-main>
                <paper-icon-button icon="cached" on-tap="retrieveResults"></paper-icon-button>
            </div>
            <div toolbar-select>
                <paper-icon-button icon="delete" on-tap="deleteSelected"></paper-icon-button>
            </div>
            <div toolbar-select-single>
                <paper-icon-button icon="editar" on-tap="editDialogForSelected"></paper-icon-button>
            </div>
            <paper-datatable id="datatable" selectable multi-selection selected-items="{{selectedItems}}" >
                <div no-results>
                    Sin resultados ...
                </div>
                <content select="paper-datatable-column"></content>
            </paper-datatable>
        </paper-datatable-card>
        <paper-dialog id="dialog" class="size-position">
            <h2>[[label]]</h2>
            <paper-dialog-scrollable>
                <content select="[form]"></content>
            </paper-dialog-scrollable>
            <div class="buttons">
                <paper-button on-tap="_dismissDialog">Guardar</paper-button>
                <paper-button dialog-dismiss>Cancelar</paper-button>
            </div>
        </paper-dialog>
        <paper-fab class="add" icon="add" on-tap="_onTapAdd"></paper-fab>
    </template>
    <script src="./lapix-table.js">

    </script>
</dom-module>
