<link rel="import" href="../../elements.html">
<link rel="import" href="../../custom-elements/lapix-table/lapix-table.html">
<link rel="import" href="../forms/form-profesor.html">
<dom-module id="lapix-registro-profesores">

    <template>
        <style>
            :host {
                display: block;
            }
            paper-toolbar{
                --paper-toolbar-background: #cfd8dd;
                --paper-toolbar-color: #000;
            }
            #search{
                background: white;
                border-radius: 3px;
                padding: 0 16px;
                color: rgba(0,0,0,.87);
            }
            #searchInput{
                min-width: 200px;
                padding: 8px 0;
                margin-left: 16px;
                border: none;
                font-family: 'Roboto', 'Noto', sans-serif;
                font-size: 16px;
                font-weight: 400;
                line-height: 24px;
            }
            #searchInput:focus{
                outline: none;
            }
        </style>
        <iron-ajax id="set" handle-as="json" content-type="application/x-www-form-urlencoded" method="post"></iron-ajax>
        <paper-toolbar>
            <div class="bottom flex"></div>
            <paper-material id="search" elevation="1" class="bottom">
                <iron-icon icon="search"></iron-icon>
                <input id="searchInput" is="iron-input" type="search" on-input="_search" >
            </paper-material>
        </paper-toolbar>
        <lapix-table id="dt" site="/usuarios/list/profesores/" label="Profesores" property="identificacion">
            <paper-datatable-column header="IdentificaciÃ³n" type="String" property="identificacion" sortable></paper-datatable-column>
            <paper-datatable-column header="Profesor" property="nombre">
                <template>
                    <span>{{value.first_name}}</span>
                    <span>{{value.last_name}}</span>
                </template>
            </paper-datatable-column>
            <paper-datatable-column header="Horario" property="horario" editable>
                <template>
                    <paper-icon-button icon="horario"></paper-icon-button>
                </template>
            </paper-datatable-column>
            <paper-datatable-column header="Actividades" property="actividades" editable>
                <template>
                    <paper-icon-button icon="actividades"></paper-icon-button>
                </template>
            </paper-datatable-column>
            <paper-datatable-column header="Estado" property="status" editable>
                <template>
                    <paper-toggle-button checked="{{value}}"></paper-toggle-button>
                </template>
            </paper-datatable-column>
            <form-profesor form></form-profesor>
        </lapix-table>
    </template>

    <script>
        Polymer({
            is: 'lapix-registro-profesores',
            behaviors: [LapixBehavior],
            ready: function() {
                this.$.dt.cleanParameter = (item) => {
                    delete item.servicios;
                    item.first_name = item.nombre.first_name;
                    item.last_name = item.nombre.last_name;
                    delete item.nombre;
                    delete item.actividades;
                    delete item.horario;
                    return item;
                };
            }
        });
    </script>

</dom-module>
